<!DOCTYPE html>
<html>
	<head>
		<title>King Arthur Organization System</title>
		<style>
			.seats {
				width: 100px;
				height: 100px;
				border-radius: 50%;
				background: white;
				border: 1px solid black;
				box-shadow: 5px 5px gray;
				margin-right: 5px;
				margin-left: 5px;
				font-size: 50px;
			}
			.seats:active {
				box-shadow: none;
				position: relative;
				top: 5px;
				left: 5px;
			}
			pre {display: none;}
			</style>
	</head>
	<body>
		<div id="buttons">
			<button class="seats" id="0" onClick="change(0)">&nbsp;</button>
		</div>
		<div>
			<button onClick="addbutton()">+</button>
			<button onClick="minusbutton()">-</button>
			<br>
			<br>
			<button onClick="autonumber()">Auto Number</button>
			<br>
			<button onClick="resetcolors()">Reset Colors</button>
			<button onClick="resetnumbers()">Reset Numbers</button>
			<button onClick="putMOAR()">Put this amount: </button><input id="putnumber" type="number" value="1" min="1" />
			<br>
			<br>
			<input type="checkbox" id="fill" /> Fill with Number:
			<input id="fillnumber" type="number" value="0" />
			<br>
			<br>
			<button onClick="autofill()">Auto Fill</button><br>
			<button onClick="showalgorithm()">Show the algorithm (with explanation)</button>
			<br>
			<br>
			<button onClick="fibonacciFill()">Fill with Fibonacci Twist</button>
			<br>
			<button onClick="dev()">DEV DON'T PRESS</button>
			<button onClick="incrementISABLELLE()">developer for isabelle</button>
			<pre id="pre">
var oneon = 1;// Set the cursor to two (it is zero indexed, so 1 becomes 0, 2 becomes 1, 3 becomes 2...)
var finished = false;
while (!finished) {//While you're not finished (! means not)
	change(oneon);//change it from white (alive) to black (dead)

	var whites = 0;
	for (var i = 0; i &lt; buttons.length; i++) {
		if (buttons[i] == 0) {whites++;}
	}
	if (whites == 1) {finished = true;}
	//The above block says that if there is only one white, you're done.

	if (!finished) {//If you're STILL not done
		var onetochange = oneon+1;//new variable, the one that you're going to change is the next one

		if (onetochange &gt;= (buttons.length)) {
			onetochange = 0;
		}
		//If it's more than the amount of seats (buttons), make it 0

		while (buttons[onetochange] == 1 || typeof buttons[onetochange] == "undefined") {
			if (onetochange &gt;= (buttons.length)) {
				onetochange = 0;
			} else {
				onetochange++;
			}
		}
		//skip the black ones

		onetochange++;
		//add one because you're skiping one (it stays alive)

		if (onetochange &gt;= (buttons.length)) {
			onetochange = 0;
		}
		while (buttons[onetochange] == 1 || typeof buttons[onetochange] == "undefined") {
			if (onetochange &gt;= (buttons.length)) {
				onetochange = 0;
			} else {
				onetochange++;
			}
		}
		//repeat of what just happened

		oneon = onetochange;//now that you've made sure that it's the next one, you put the cursor there
	}
}
			</pre>

		</div>
		<script>
			function bouncy() {
				window.setInterval(incrementISABLELLE, 500);
			}
			function incrementISABLELLE() {
				addbutton();
				resetcolors();
				autonumber();
				fibonacciFill();
			}
			function dev() {
				alert(eval(prompt("DON'T BE DUMB")));
			}
			function showalgorithm() {
				document.getElementById("pre").style.display = "block";
			}

			//THANK STACKOVERFLOW: (fuck stackoverflow because it doesn't work)
			/*window.onerror = function(msg, url, linenumber) {
				alert(msg);
				return true;
			}*/

			var buttons = [0];//0  = w, 1 = b;

			function putMOAR() {
				for (var i = buttons.length; i < document.getElementById("putnumber").value; i++) {
					addbutton();
				}
			}
			function findNextWhite(onetochangedraft) {
				if (onetochangedraft >= (buttons.length)) {
					onetochangedraft = 0;
				}
				while (buttons[onetochangedraft] == 1 || typeof buttons[onetochangedraft] == "undefined") {
					if (onetochangedraft >= (buttons.length)) {
						onetochangedraft = 0;
					} else {
						onetochangedraft++;
					}
				}
				if (onetochangedraft >= (buttons.length)) {
					onetochangedraft = 0;
				}
				return onetochangedraft;
			}

			function fibonacciFill() {
				var loopcountJIC = 0;
				var oneon = 0;
				var finished = false;
				var seqnum = 0;
				var beforeseqnum = 0;
				while (!finished) {
					change(oneon);
					var whites = 0;
					for (var i = 0; i < buttons.length; i++) {
						if (buttons[i] == 0) {whites++;}
					}
					if (whites == 1) {finished = true;}

					if (!finished) {
						var onetochange = oneon;
						for (var i = 0; i < seqnum; i++) {
							onetochange++;
							onetochange = findNextWhite(onetochange);
						}
						oneon = onetochange;
						var tempseqnum = seqnum;
						seqnum += beforeseqnum;
						beforeseqnum = tempweqnum;//\\
						if (seqnum == 0 && beforeseqnum == 0) {
							beforeseqnum = 1;
						}
					}
					//if (loopcountJIC == 6) {finished = true;}
					loopcountJIC++;
				}
			}
			function autofill() {
				var loopcountJIC = 0;
				var oneon = 1;
				var finished = false;
				while (!finished) {
					change(oneon);
					var whites = 0;
					for (var i = 0; i < buttons.length; i++) {
						if (buttons[i] == 0) {whites++;}
					}
					if (whites == 1) {finished = true;}

					if (!finished) {
						var onetochange = oneon+1;
						if (onetochange >= (buttons.length)) {
							onetochange = 0;
						}
						while (buttons[onetochange] == 1 || typeof buttons[onetochange] == "undefined") {
							if (onetochange >= (buttons.length)) {
								onetochange = 0;
							} else {
								onetochange++;
							}
						}
						onetochange++;
						if (onetochange >= (buttons.length)) {//we do this twice because we have to skip one.
							onetochange = 0;
						}
						while (buttons[onetochange] == 1 || typeof buttons[onetochange] == "undefined") {
							if (onetochange >= (buttons.length)) {
								onetochange = 0;
							} else {
								onetochange++;
							}
						}
						console.log("oneon " + oneon + " onetochange " + onetochange);
						oneon = onetochange;
					}
					if (loopcountJIC == 10001) {finished = true;}
					loopcountJIC++;
				}
			}

			function change(button) {
				if (document.getElementById("fill").checked != true) {
					if (buttons[button] == 0) {
						document.getElementById(button).style.background = "black";
						buttons[button] = 1;
					} else if (buttons[button] == 1) {
						document.getElementById(button).style.background = "white";
						buttons[button] = 0;
					}
				} else {
					document.getElementById(button).innerHTML = document.getElementById("fillnumber").value;
				}
			}

			function addbutton() {
				var newbutton = document.createElement("button");
				newbutton.setAttribute("class", "seats");
				newbutton.setAttribute("id", buttons.length);
				newbutton.setAttribute("onClick", "change(" + buttons.length + ")");
				newbutton.innerHTML="&nbsp;";
				document.getElementById("buttons").appendChild(newbutton);
				buttons.push(0);
			}

			function minusbutton() {
				if (buttons.length > 1) {
					document.getElementById(buttons.length-1).remove();
					buttons.splice(buttons.length-1, 1);
				} else {
					alert("You can't have less than one seat at the table? Who's King Arthur going to talk to? Himself??!?\n\n;)");
				}
			}

			function autonumber() {
				for (var i = 0; i < buttons.length; i++) {
					document.getElementById(i).innerHTML = i+1;
				}
			}

			function resetcolors() {
				for (var i = 0; i < buttons.length; i++) {
					document.getElementById(i).style.background = "white";
					buttons[i] = 0;
				}
			}

			function resetnumbers() {
				for (var i = 0; i < buttons.length; i++) {
					document.getElementById(i).innerHTML = "&nbsp;";
				}
			}
			</script>
	</body>
</html>
